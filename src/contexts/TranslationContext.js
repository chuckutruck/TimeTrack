import React, { createContext, useContext, useState, useEffect } from 'react';

const TranslationContext = createContext();

const translations = {
  es: {
    navbar: {
      welcome: 'Bienvenido',
      timeEntry: 'Registro de Horas',
      projects: 'Proyectos',
      history: 'Historial',
      stats: 'Estadísticas',
      profile: 'Perfil',
      logout: 'Cerrar Sesión',
    },
    dashboard: {
      title: 'Panel de Control',
      welcomeMessage: '¡Bienvenido a Tidbok! Tu asistente personal para el seguimiento del tiempo.',
      getStarted: 'Comienza registrando tus horas o gestionando tus proyectos.',
      quickActions: 'Acciones Rápidas',
      addTimeEntry: 'Añadir Registro de Horas',
      manageProjects: 'Gestionar Proyectos',
      viewHistory: 'Ver Historial',
      viewStats: 'Ver Estadísticas',
      connectionStatus: 'Estado de Conexión',
      online: 'Online',
      offline: 'Sin conexión',
      syncing: 'Sincronizando...',
    },
    timeEntry: {
      title: 'Registro de Horas',
      date: 'Fecha',
      project: 'Proyecto',
      selectProject: 'Selecciona un proyecto',
      startTime: 'Hora de Inicio',
      endTime: 'Hora de Fin',
      breakTime: 'Tiempo de Descanso (minutos)',
      notes: 'Notas',
      colleagues: 'Compañeros',
      addEntry: 'Añadir Registro',
      hoursWorked: 'Horas Trabajadas',
      classification: 'Clasificación de Horas',
      successAdd: 'Registro de horas añadido con éxito.',
      errorAdd: 'Error al añadir registro de horas.',
      errorFetchProjects: 'Error al cargar proyectos.',
      noProjects: 'No hay proyectos disponibles. Por favor, crea uno primero.',
    },
    projects: {
      title: 'Gestión de Proyectos',
      projectName: 'Nombre del Proyecto',
      projectCode: 'Código del Proyecto',
      addProject: 'Añadir Proyecto',
      editProject: 'Editar Proyecto',
      deleteProject: 'Eliminar Proyecto',
      successAdd: 'Proyecto añadido con éxito.',
      successUpdate: 'Proyecto actualizado con éxito.',
      successDelete: 'Proyecto eliminado con éxito.',
      errorAdd: 'Error al añadir proyecto.',
      errorUpdate: 'Error al actualizar proyecto.',
      errorDelete: 'Error al eliminar proyecto.',
      confirmDelete: '¿Estás seguro de que quieres eliminar este proyecto? Esto eliminará todos los registros de horas asociados.',
      noProjects: 'No hay proyectos creados aún.',
      createFirst: 'Crea tu primer proyecto para empezar a organizar tus horas.',
    },
    history: {
      title: 'Historial de Horas',
      filterBy: 'Filtrar por',
      year: 'Año',
      month: 'Mes',
      week: 'Semana',
      all: 'Todo',
      totalHours: 'Horas Totales',
      weeklySummary: 'Resumen Semanal',
      monthlySummary: 'Resumen Mensual',
      noRecords: 'No hay registros de horas para el período seleccionado.',
      exportPdf: 'Exportar a PDF',
      date: 'Fecha',
      project: 'Proyecto',
      hours: 'Horas',
      notes: 'Notas',
      actions: 'Acciones',
      edit: 'Editar',
      delete: 'Eliminar',
      confirmDelete: '¿Estás seguro de que quieres eliminar este registro de horas?',
      successDelete: 'Registro de horas eliminado con éxito.',
      errorDelete: 'Error al eliminar registro de horas.',
    },
    stats: {
      title: 'Estadísticas de Horas',
      hoursByWeek: 'Horas por Semana',
      hoursByProject: 'Distribución de Horas por Proyecto',
      noData: 'No hay datos suficientes para mostrar las estadísticas.',
    },
    profile: {
      title: 'Perfil de Usuario',
      firstName: 'Nombre',
      lastName: 'Apellido',
      phone: 'Teléfono',
      avatar: 'Avatar',
      updateProfile: 'Actualizar Perfil',
      successUpdate: 'Perfil actualizado con éxito.',
      errorUpdate: 'Error al actualizar perfil.',
      generateAvatar: 'Generar Avatar',
    },
    common: {
      save: 'Guardar',
      cancel: 'Cancelar',
      close: 'Cerrar',
      confirm: 'Confirmar',
      loading: 'Cargando...',
      error: 'Error',
      success: 'Éxito',
      selectFile: 'Seleccionar archivo',
      hours: 'horas',
      successExport: 'Exportado con éxito.',
      errorExport: 'Error al exportar.',
      successUpdate: 'Actualizado con éxito.',
      errorUpdate: 'Error al actualizar.',
    }
  },
  en: {
    navbar: {
      welcome: 'Welcome',
      timeEntry: 'Time Entry',
      projects: 'Projects',
      history: 'History',
      stats: 'Statistics',
      profile: 'Profile',
      logout: 'Logout',
    },
    dashboard: {
      title: 'Dashboard',
      welcomeMessage: 'Welcome to Tidbok! Your personal time tracking assistant.',
      getStarted: 'Get started by logging your hours or managing your projects.',
      quickActions: 'Quick Actions',
      addTimeEntry: 'Add Time Entry',
      manageProjects: 'Manage Projects',
      viewHistory: 'View History',
      viewStats: 'View Statistics',
      connectionStatus: 'Connection Status',
      online: 'Online',
      offline: 'Offline',
      syncing: 'Syncing...',
    },
    timeEntry: {
      title: 'Time Entry',
      date: 'Date',
      project: 'Project',
      selectProject: 'Select a project',
      startTime: 'Start Time',
      endTime: 'End Time',
      breakTime: 'Break Time (minutes)',
      notes: 'Notes',
      colleagues: 'Colleagues',
      addEntry: 'Add Entry',
      hoursWorked: 'Hours Worked',
      classification: 'Hour Classification',
      successAdd: 'Time entry added successfully.',
      errorAdd: 'Error adding time entry.',
      errorFetchProjects: 'Error fetching projects.',
      noProjects: 'No projects available. Please create one first.',
    },
    projects: {
      title: 'Project Management',
      projectName: 'Project Name',
      projectCode: 'Project Code',
      addProject: 'Add Project',
      editProject: 'Edit Project',
      deleteProject: 'Delete Project',
      successAdd: 'Project added successfully.',
      successUpdate: 'Project updated successfully.',
      successDelete: 'Project deleted successfully.',
      errorAdd: 'Error adding project.',
      errorUpdate: 'Error updating project.',
      errorDelete: 'Error deleting project.',
      confirmDelete: 'Are you sure you want to delete this project? This will delete all associated time entries.',
      noProjects: 'No projects created yet.',
      createFirst: 'Create your first project to start organizing your hours.',
    },
    history: {
      title: 'Time History',
      filterBy: 'Filter by',
      year: 'Year',
      month: 'Month',
      week: 'Week',
      all: 'All',
      totalHours: 'Total Hours',
      weeklySummary: 'Weekly Summary',
      monthlySummary: 'Monthly Summary',
      noRecords: 'No time records for the selected period.',
      exportPdf: 'Export to PDF',
      date: 'Date',
      project: 'Project',
      hours: 'Hours',
      notes: 'Notes',
      actions: 'Actions',
      edit: 'Edit',
      delete: 'Delete',
      confirmDelete: 'Are you sure you want to delete this time entry?',
      successDelete: 'Time entry deleted successfully.',
      errorDelete: 'Error deleting time entry.',
    },
    stats: {
      title: 'Time Statistics',
      hoursByWeek: 'Hours by Week',
      hoursByProject: 'Hours Distribution by Project',
      noData: 'Not enough data to display statistics.',
    },
    profile: {
      title: 'User Profile',
      firstName: 'First Name',
      lastName: 'Last Name',
      phone: 'Phone',
      avatar: 'Avatar',
      updateProfile: 'Update Profile',
      successUpdate: 'Profile updated successfully.',
      errorUpdate: 'Error updating profile.',
      generateAvatar: 'Generate Avatar',
    },
    common: {
      save: 'Save',
      cancel: 'Cancel',
      close: 'Close',
      confirm: 'Confirm',
      loading: 'Loading...',
      error: 'Error',
      success: 'Success',
      selectFile: 'Select file',
      hours: 'hours',
      successExport: 'Exported successfully.',
      errorExport: 'Error exporting.',
      successUpdate: 'Updated successfully.',
      errorUpdate: 'Error updating.',
    }
  },
  sv: {
    navbar: {
      welcome: 'Välkommen',
      timeEntry: 'Tidsregistrering',
      projects: 'Projekt',
      history: 'Historik',
      stats: 'Statistik',
      profile: 'Profil',
      logout: 'Logga ut',
    },
    dashboard: {
      title: 'Översikt',
      welcomeMessage: 'Välkommen till Tidbok! Din personliga tidsregistreringsassistent.',
      getStarted: 'Börja med att logga dina timmar eller hantera dina projekt.',
      quickActions: 'Snabba Åtgärder',
      addTimeEntry: 'Lägg till Tidsregistrering',
      manageProjects: 'Hantera Projekt',
      viewHistory: 'Visa Historik',
      viewStats: 'Visa Statistik',
      connectionStatus: 'Anslutningsstatus',
      online: 'Online',
      offline: 'Offline',
      syncing: 'Synkroniserar...',
    },
    timeEntry: {
      title: 'Tidsregistrering',
      date: 'Datum',
      project: 'Projekt',
      selectProject: 'Välj ett projekt',
      startTime: 'Starttid',
      endTime: 'Sluttid',
      breakTime: 'Rasttid (minuter)',
      notes: 'Anteckningar',
      colleagues: 'Kollegor',
      addEntry: 'Lägg till Post',
      hoursWorked: 'Arbetade Timmar',
      classification: 'Timklassificering',
      successAdd: 'Tidsregistrering tillagd.',
      errorAdd: 'Fel vid tillägg av tidsregistrering.',
      errorFetchProjects: 'Fel vid hämtning av projekt.',
      noProjects: 'Inga projekt tillgängliga. Vänligen skapa ett först.',
    },
    projects: {
      title: 'Projekthantering',
      projectName: 'Projektnamn',
      projectCode: 'Projektkod',
      addProject: 'Lägg till Projekt',
      editProject: 'Redigera Projekt',
      deleteProject: 'Ta bort Projekt',
      successAdd: 'Projekt tillagt.',
      successUpdate: 'Projekt uppdaterat.',
      successDelete: 'Projekt borttaget.',
      errorAdd: 'Fel vid tillägg av projekt.',
      errorUpdate: 'Fel vid uppdatering av projekt.',
      errorDelete: 'Fel vid borttagning av projekt.',
      confirmDelete: 'Är du säker på att du vill ta bort detta projekt? Detta kommer att ta bort alla associerade tidsregistreringar.',
      noProjects: 'Inga projekt skapade ännu.',
      createFirst: 'Skapa ditt första projekt för att börja organisera dina timmar.',
    },
    history: {
      title: 'Tidshistorik',
      filterBy: 'Filtrera efter',
      year: 'År',
      month: 'Månad',
      week: 'Vecka',
      all: 'Alla',
      totalHours: 'Totala Timmar',
      weeklySummary: 'Veckosammanfattning',
      monthlySummary: 'Månadssammanfattning',
      noRecords: 'Inga tidsregistreringar för den valda perioden.',
      exportPdf: 'Exportera till PDF',
      date: 'Datum',
      project: 'Projekt',
      hours: 'Timmar',
      notes: 'Anteckningar',
      actions: 'Åtgärder',
      edit: 'Redigera',
      delete: 'Ta bort',
      confirmDelete: 'Är du säker på att du vill ta bort denna tidsregistrering?',
      successDelete: 'Tidsregistrering borttagen.',
      errorDelete: 'Fel vid borttagning av tidsregistrering.',
    },
    stats: {
      title: 'Tidsstatistik',
      hoursByWeek: 'Timmar per Vecka',
      hoursByProject: 'Timfördelning per Projekt',
      noData: 'Otillräcklig data för att visa statistik.',
    },
    profile: {
      title: 'Användarprofil',
      firstName: 'Förnamn',
      lastName: 'Efternamn',
      phone: 'Telefon',
      avatar: 'Avatar',
      updateProfile: 'Uppdatera Profil',
      successUpdate: 'Profil uppdaterad.',
      errorUpdate: 'Fel vid uppdatering av profil.',
      generateAvatar: 'Generera Avatar',
    },
    common: {
      save: 'Spara',
      cancel: 'Avbryt',
      close: 'Stäng',
      confirm: 'Bekräfta',
      loading: 'Laddar...',
      error: 'Fel',
      success: 'Framgång',
      selectFile: 'Välj fil',
      hours: 'timmar',
      successExport: 'Exporterad.',
      errorExport: 'Fel vid export.',
      successUpdate: 'Uppdaterad.',
      errorUpdate: 'Fel vid uppdatering.',
    }
  },
};

export const useTranslation = () => useContext(TranslationContext);

export const TranslationProvider = ({ children }) => {
  const [language, setLanguage] = useState('es'); // Default language

  const t = (key) => {
    const [section, subKey] = key.split('.');
    return translations[language]?.[section]?.[subKey] || key;
  };

  return (
    <TranslationContext.Provider value={{ t, language, setLanguage }}>
      {children}
    </TranslationContext.Provider>
  );
};